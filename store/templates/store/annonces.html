{% extends 'base.html' %}
{% load static %}
{% block content %}

<link rel="stylesheet" href="{% static 'css/annonces.css' %}">

<div class="annonces-container">
  <h2 class="categorie-titre">Annonces — {{ categorie.nom }}</h2>

  <!-- Bandeau sous-catégories -->
  <div class="sous-categories-bar">
    {% for sc in sous_categories %}
      <a href="{% url 'store:annonces_par_souscategorie' sc.id %}" class="sous-categorie-link">
        {{ sc.nom }}
      </a>
    {% endfor %}
  </div>

  <!-- Grille d'annonces -->
  <section class="annonces-grid">
    {% if annonces %}
      {% for annonce in annonces %}
        <article class="grid-card">
          <a href="{% url 'store:detail_annonce' annonce.id %}">
            {% if annonce.photo %}
              <img class="grid-img" src="{{ annonce.photo.url }}" alt="{{ annonce.titre }}">
            {% else %}
              <img class="grid-img" src="{% static 'images/default.png' %}" alt="image par défaut">
            {% endif %}
            <div class="grid-caption">
              <h3>{{ annonce.titre|truncatechars:40 }}</h3>
              <p class="prix">{{ annonce.prix }} GNF</p>
            </div>
          </a>
        </article>
      {% endfor %}
    {% else %}
      <p>Aucune annonce disponible pour cette catégorie.</p>
    {% endif %}
  </section>
</div>

{% endblock %}
